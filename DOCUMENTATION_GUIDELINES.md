# 文档管理约束与规范

## 文档目录结构

```
项目根目录/
├── README.md                           # 项目主文档
├── QUICK_START.md                      # 快速开始指南
├── DOCUMENTATION_GUIDELINES.md         # 文档管理约束（本文件）
├── docs/                               # 项目级文档目录
│   ├── guides/                         # 使用指南
│   │   ├── INDICATOR_GUIDE.md         # 指标使用指南
│   │   ├── BACKTEST_GUIDE.md          # 回测功能指南
│   │   └── API_TEST_GUIDE.md          # API测试指南
│   ├── fixes/                          # 问题修复记录
│   │   ├── API_RESPONSE_FIX.md        # API响应修复
│   │   ├── BACKTEST_FIX_SUMMARY.md    # 回测修复总结
│   │   └── STRATEGY_VIEW_FIX.md       # 策略视图修复
│   ├── features/                       # 功能实现文档
│   │   ├── INDICATOR_TOOLTIP_SUMMARY.md
│   │   └── UPDATE_SUMMARY.md
│   └── archive/                        # 归档文档
│       ├── COMPLETE_UPDATE_GUIDE.md
│       ├── QUICK_FIX.md
│       └── FINAL_FIX.md
├── backend/
│   ├── README.md                       # Backend说明
│   └── docs/                           # Backend文档目录
│       ├── BACKEND_STRUCTURE.md        # 目录结构说明
│       ├── API_IMPLEMENTATION_SUMMARY.md
│       ├── PERFORMANCE_OPTIMIZATION.md
│       └── TASK_*_IMPLEMENTATION_SUMMARY.md
└── frontend/
    ├── README.md                       # Frontend说明
    └── docs/                           # Frontend文档目录
        ├── FRONTEND_STRUCTURE.md       # 目录结构说明
        └── COMPONENT_GUIDE.md          # 组件使用指南
```

## 文档分类规范

### 1. 项目级文档（根目录）

#### README.md
**用途**: 项目概述和入口文档

**必须包含**:
- 项目简介
- 主要功能
- 技术栈
- 快速开始链接
- 目录结构概览
- 相关文档链接

**更新频率**: 重大功能变更时

#### QUICK_START.md
**用途**: 快速开始指南

**必须包含**:
- 环境要求
- 安装步骤
- 运行命令
- 基本使用示例
- 常见问题

**更新频率**: 安装流程变更时

#### DOCUMENTATION_GUIDELINES.md
**用途**: 文档管理规范（本文件）

**必须包含**:
- 文档目录结构
- 文档分类规范
- 命名规范
- 编写规范
- 维护流程

**更新频率**: 文档规范变更时

### 2. 使用指南（docs/guides/）

**用途**: 功能使用说明和教程

**文件命名**: `{功能名}_GUIDE.md`

**必须包含**:
- 功能概述
- 使用方法
- 参数说明
- 示例代码
- 常见问题
- 相关链接

**示例**:
- `INDICATOR_GUIDE.md` - 技术指标使用指南
- `BACKTEST_GUIDE.md` - 回测功能指南
- `API_TEST_GUIDE.md` - API测试指南

**更新频率**: 功能变更或用户反馈时

### 3. 问题修复记录（docs/fixes/）

**用途**: 记录问题和修复过程

**文件命名**: `{问题描述}_FIX.md` 或 `{功能名}_FIX_SUMMARY.md`

**必须包含**:
- 问题描述
- 根本原因
- 修复内容
- 测试步骤
- 相关文件
- 注意事项

**示例**:
- `API_RESPONSE_FIX.md` - API响应处理修复
- `BACKTEST_FIX_SUMMARY.md` - 回测功能修复总结
- `STRATEGY_VIEW_FIX.md` - 策略视图修复

**更新频率**: 问题修复后立即创建

**归档规则**: 
- 修复后3个月且无相关问题，移至archive/
- 保留重要的修复记录作为参考

### 4. 功能实现文档（docs/features/）

**用途**: 记录新功能的实现细节

**文件命名**: `{功能名}_IMPLEMENTATION.md` 或 `{功能名}_SUMMARY.md`

**必须包含**:
- 功能概述
- 技术方案
- 实现细节
- API接口
- 数据结构
- 测试方法

**示例**:
- `INDICATOR_TOOLTIP_SUMMARY.md` - 指标提示功能实现
- `UPDATE_SUMMARY.md` - 更新总结

**更新频率**: 功能开发完成后

### 5. 归档文档（docs/archive/）

**用途**: 存放过期或临时文档

**归档条件**:
- 临时性的修复指南（已被正式文档替代）
- 过期的实现文档
- 历史版本的说明文档

**命名保持不变**

**注意**: 归档文档不删除，保留历史记录

### 6. Backend文档（backend/docs/）

**用途**: Backend特定的技术文档

**必须包含**:
- `BACKEND_STRUCTURE.md` - 目录结构说明
- `API_IMPLEMENTATION_SUMMARY.md` - API实现总结
- `PERFORMANCE_OPTIMIZATION.md` - 性能优化文档
- 任务实现总结

**更新频率**: Backend代码结构变更时

### 7. Frontend文档（frontend/docs/）

**用途**: Frontend特定的技术文档

**必须包含**:
- `FRONTEND_STRUCTURE.md` - 目录结构说明
- `COMPONENT_GUIDE.md` - 组件使用指南
- 样式规范
- 状态管理说明

**更新频率**: Frontend代码结构变更时

## 文档命名规范

### 通用规则
- 使用英文命名
- 全大写字母
- 下划线分隔单词
- 扩展名: `.md`

### 命名模式

#### 指南类
```
{功能名}_GUIDE.md
例: INDICATOR_GUIDE.md, BACKTEST_GUIDE.md
```

#### 修复类
```
{问题描述}_FIX.md
{功能名}_FIX_SUMMARY.md
例: API_RESPONSE_FIX.md, BACKTEST_FIX_SUMMARY.md
```

#### 实现类
```
{功能名}_IMPLEMENTATION.md
{功能名}_SUMMARY.md
例: INDICATOR_TOOLTIP_SUMMARY.md, UPDATE_SUMMARY.md
```

#### 结构类
```
{模块名}_STRUCTURE.md
例: BACKEND_STRUCTURE.md, FRONTEND_STRUCTURE.md
```

#### 任务类
```
TASK_{编号}_{描述}.md
例: TASK_9_IMPLEMENTATION_SUMMARY.md
```

## 文档编写规范

### 1. 文档结构

#### 标题层级
```markdown
# 一级标题 - 文档标题
## 二级标题 - 主要章节
### 三级标题 - 子章节
#### 四级标题 - 详细说明
```

**规则**:
- 只使用一个一级标题
- 层级不超过4级
- 标题简洁明了
- 使用中文或英文，保持一致

#### 必备章节
```markdown
# 文档标题

## 概述
简要说明文档内容和目的

## 主要内容
详细说明

## 示例
实际使用示例

## 相关文档
链接到相关文档

## 更新记录（可选）
记录重要更新
```

### 2. 内容编写

#### 语言风格
- **清晰简洁**: 避免冗长描述
- **结构化**: 使用列表、表格、代码块
- **一致性**: 术语、格式保持一致
- **可操作**: 提供具体步骤和示例

#### 代码块
```markdown
\`\`\`python
# Python代码示例
def example():
    pass
\`\`\`

\`\`\`bash
# Shell命令示例
npm run dev
\`\`\`

\`\`\`json
{
  "key": "value"
}
\`\`\`
```

**规则**:
- 指定语言类型
- 添加注释说明
- 保持缩进正确
- 可直接复制运行

#### 列表
```markdown
**无序列表**:
- 项目1
- 项目2
  - 子项目2.1
  - 子项目2.2

**有序列表**:
1. 步骤1
2. 步骤2
3. 步骤3

**任务列表**:
- [x] 已完成任务
- [ ] 待完成任务
```

#### 表格
```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 值1 | 值2 | 值3 |
| 值4 | 值5 | 值6 |
```

**规则**:
- 表头清晰
- 对齐美观
- 内容简洁

#### 链接
```markdown
**内部链接**:
[相关文档](./OTHER_DOC.md)
[章节链接](#章节标题)

**外部链接**:
[FastAPI文档](https://fastapi.tiangolo.com/)
```

#### 强调
```markdown
**粗体**: 重要内容
*斜体*: 强调内容
`代码`: 代码或命令
> 引用: 注意事项或引用内容
```

#### 提示框
```markdown
**注意**: 重要提示信息

**警告**: 需要特别注意的内容

**提示**: 有用的建议

**示例**: 实际使用示例
```

### 3. 图片和图表

#### 图片
```markdown
![图片描述](./images/screenshot.png)
```

**规则**:
- 图片存放在 `docs/images/` 目录
- 使用描述性文件名
- 添加alt文本
- 控制图片大小

#### 流程图（Mermaid）
```markdown
\`\`\`mermaid
graph TD
    A[开始] --> B[处理]
    B --> C[结束]
\`\`\`
```

#### 目录树
```markdown
\`\`\`
project/
├── src/
│   ├── main.py
│   └── utils.py
└── tests/
    └── test_main.py
\`\`\`
```

### 4. 版本和日期

#### 文档头部
```markdown
# 文档标题

**版本**: 1.0.0
**更新日期**: 2024-02-08
**作者**: 开发团队
**状态**: 当前 | 归档 | 草稿
```

#### 更新记录
```markdown
## 更新记录

### 2024-02-08 - v1.1.0
- 添加新功能说明
- 修复文档错误

### 2024-02-01 - v1.0.0
- 初始版本
```

## 文档维护流程

### 1. 创建新文档

**步骤**:
1. 确定文档类型和分类
2. 按命名规范创建文件
3. 使用文档模板
4. 编写内容
5. 添加到相关文档的链接
6. 提交代码审查

**检查清单**:
- [ ] 文件名符合规范
- [ ] 位置正确
- [ ] 结构完整
- [ ] 内容清晰
- [ ] 代码可运行
- [ ] 链接有效

### 2. 更新现有文档

**触发条件**:
- 功能变更
- Bug修复
- 用户反馈
- 定期审查

**步骤**:
1. 定位需要更新的文档
2. 修改相关内容
3. 更新版本和日期
4. 添加更新记录
5. 验证链接和示例
6. 提交代码审查

### 3. 归档文档

**归档条件**:
- 功能已废弃
- 文档已过期
- 被新文档替代
- 临时文档完成使命

**步骤**:
1. 评估文档是否需要归档
2. 移动到 `docs/archive/`
3. 在原位置添加重定向说明
4. 更新相关链接
5. 记录归档原因

**重定向说明示例**:
```markdown
# 文档已归档

本文档已归档，请参考新文档：
- [新文档标题](./NEW_DOC.md)

归档原因: 功能已重构，文档已更新

归档日期: 2024-02-08
```

### 4. 删除文档

**删除条件**:
- 完全错误的文档
- 重复的文档
- 测试文档

**注意**: 
- 谨慎删除，优先归档
- 删除前确认无引用
- 记录删除原因

### 5. 定期审查

**频率**: 每季度一次

**审查内容**:
- 文档准确性
- 链接有效性
- 示例可用性
- 结构合理性
- 归档候选

**审查清单**:
- [ ] 所有链接有效
- [ ] 代码示例可运行
- [ ] 内容与代码一致
- [ ] 无过期信息
- [ ] 结构清晰合理

## 文档模板

### 功能指南模板

```markdown
# {功能名}使用指南

**版本**: 1.0.0
**更新日期**: YYYY-MM-DD

## 概述

简要介绍功能的作用和价值。

## 功能说明

### 主要功能
- 功能1
- 功能2
- 功能3

### 使用场景
描述适用的场景。

## 使用方法

### 基本使用

#### 步骤1: 准备工作
说明和示例

#### 步骤2: 执行操作
说明和示例

#### 步骤3: 查看结果
说明和示例

### 高级用法

#### 功能A
说明和示例

#### 功能B
说明和示例

## 参数说明

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| param1 | string | 是 | - | 参数说明 |
| param2 | number | 否 | 0 | 参数说明 |

## 示例

### 示例1: 基本使用
\`\`\`python
# 代码示例
\`\`\`

### 示例2: 高级用法
\`\`\`python
# 代码示例
\`\`\`

## 常见问题

### Q: 问题1？
A: 答案1

### Q: 问题2？
A: 答案2

## 注意事项

- 注意事项1
- 注意事项2

## 相关文档

- [相关文档1](./DOC1.md)
- [相关文档2](./DOC2.md)

## 更新记录

### YYYY-MM-DD - v1.0.0
- 初始版本
```

### 问题修复模板

```markdown
# {问题描述}修复总结

**版本**: 1.0.0
**修复日期**: YYYY-MM-DD
**影响范围**: 模块名称

## 问题描述

详细描述遇到的问题，包括：
- 问题现象
- 错误信息
- 影响范围

## 根本原因

分析问题的根本原因：
1. 原因1
2. 原因2
3. 原因3

## 修复内容

### 1. 修复项1

**文件**: `path/to/file.py`

**修复前**:
\`\`\`python
# 原代码
\`\`\`

**修复后**:
\`\`\`python
# 新代码
\`\`\`

**说明**: 修复说明

### 2. 修复项2

同上格式

## 测试步骤

1. 测试步骤1
2. 测试步骤2
3. 预期结果

## 验证方法

\`\`\`bash
# 验证命令
\`\`\`

## 相关文件

- `file1.py` - 文件说明
- `file2.py` - 文件说明

## 注意事项

- 注意事项1
- 注意事项2

## 相关问题

- [相关问题1](#)
- [相关问题2](#)
```

### 功能实现模板

```markdown
# {功能名}实现总结

**版本**: 1.0.0
**完成日期**: YYYY-MM-DD
**开发者**: 姓名

## 功能概述

简要描述功能的目的和价值。

## 需求分析

### 功能需求
1. 需求1
2. 需求2
3. 需求3

### 非功能需求
- 性能要求
- 安全要求
- 可维护性要求

## 技术方案

### 架构设计

\`\`\`mermaid
graph TD
    A[组件A] --> B[组件B]
    B --> C[组件C]
\`\`\`

### 技术选型
- 技术1: 选择原因
- 技术2: 选择原因

### 数据结构

\`\`\`python
# 数据结构定义
\`\`\`

## 实现细节

### 1. 模块A

**文件**: `path/to/module_a.py`

**功能**: 模块功能说明

**关键代码**:
\`\`\`python
# 代码示例
\`\`\`

### 2. 模块B

同上格式

## API接口

### 接口1

**端点**: `POST /api/endpoint`

**请求**:
\`\`\`json
{
  "param1": "value1"
}
\`\`\`

**响应**:
\`\`\`json
{
  "result": "success"
}
\`\`\`

## 测试

### 单元测试
- 测试用例1
- 测试用例2

### 集成测试
- 测试场景1
- 测试场景2

### 测试结果
- 测试覆盖率: 85%
- 所有测试通过

## 性能评估

- 响应时间: < 100ms
- 并发能力: 1000 req/s
- 内存占用: < 100MB

## 已知问题

- 问题1: 说明和计划
- 问题2: 说明和计划

## 后续优化

- 优化项1
- 优化项2

## 相关文档

- [使用指南](./GUIDE.md)
- [API文档](./API.md)

## 更新记录

### YYYY-MM-DD - v1.0.0
- 初始实现
```

## 文档工具

### 推荐工具

1. **Markdown编辑器**:
   - VS Code + Markdown插件
   - Typora
   - MacDown (macOS)

2. **图表工具**:
   - Mermaid (流程图)
   - Draw.io (架构图)
   - PlantUML (UML图)

3. **文档生成**:
   - MkDocs (文档网站)
   - Sphinx (API文档)
   - Swagger (API文档)

4. **版本控制**:
   - Git
   - GitHub/GitLab

### VS Code插件推荐

- Markdown All in One
- Markdown Preview Enhanced
- markdownlint
- Mermaid Preview
- Code Spell Checker

## 文档质量标准

### 必须满足
- [ ] 标题清晰
- [ ] 结构完整
- [ ] 内容准确
- [ ] 示例可用
- [ ] 链接有效
- [ ] 无拼写错误
- [ ] 格式规范

### 建议满足
- [ ] 图表辅助
- [ ] 多个示例
- [ ] 常见问题
- [ ] 相关链接
- [ ] 更新记录

## 常见问题

### Q: 文档应该多详细？
A: 根据受众决定：
- 用户文档：重点在使用方法和示例
- 开发文档：重点在实现细节和原理
- API文档：重点在接口定义和参数

### Q: 何时更新文档？
A: 
- 代码变更时同步更新
- 发现错误时立即修正
- 用户反馈时补充说明
- 定期审查时优化改进

### Q: 如何处理过期文档？
A: 
1. 评估是否还有价值
2. 有价值则更新
3. 无价值则归档
4. 完全错误则删除

### Q: 文档应该用中文还是英文？
A: 
- 项目文档：根据团队决定，保持一致
- 代码注释：建议英文
- 用户文档：根据用户群体决定
- 本项目：中文为主

## 附录

### 文档检查清单

**创建新文档时**:
- [ ] 文件名符合规范
- [ ] 位置正确
- [ ] 使用了模板
- [ ] 标题层级正确
- [ ] 包含必备章节
- [ ] 代码示例可运行
- [ ] 链接有效
- [ ] 无拼写错误
- [ ] 格式统一
- [ ] 添加到索引

**更新文档时**:
- [ ] 内容与代码一致
- [ ] 更新了版本和日期
- [ ] 添加了更新记录
- [ ] 验证了示例
- [ ] 检查了链接
- [ ] 通知了相关人员

**归档文档时**:
- [ ] 评估了归档必要性
- [ ] 移动到正确位置
- [ ] 添加了重定向说明
- [ ] 更新了相关链接
- [ ] 记录了归档原因

### 参考资源

- [Markdown语法](https://www.markdownguide.org/)
- [Mermaid文档](https://mermaid-js.github.io/)
- [技术写作指南](https://developers.google.com/tech-writing)
- [文档最佳实践](https://www.writethedocs.org/guide/)

---

**文档版本**: 1.0.0
**最后更新**: 2024-02-08
**维护者**: 开发团队
